{% extends "admin_base.html" %}
{% block content %}

<div class="container-fluid py-4">
  <h2 class="mb-4 fw-bold text-primary">📝 Manage Testimonials</h2>

  <!-- Add Testimonial Form -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-success text-white fw-semibold">
      Add New Testimonial
    </div>
    <div class="card-body">
      <form method="POST">
        <div class="mb-3">
          <label for="name" class="form-label">User Name</label>
          <input type="text" name="name" id="name" class="form-control" placeholder="User name" required>
        </div>
        <div class="mb-3">
          <label for="content" class="form-label">Testimonial</label>
          <textarea name="content" id="content" class="form-control" placeholder="Write your testimonial..." required></textarea>
        </div>
        <div class="mb-3">
          <label for="rating" class="form-label">Rating (1–5)</label>
          <input type="number" name="rating" id="rating" class="form-control" min="1" max="5" placeholder="Stars" required>
        </div>
        <button type="submit" class="btn btn-success">Add Testimonial</button>
      </form>
    </div>
  </div>

  <!-- All Testimonials List -->
  <div class="card shadow-sm">
    <div class="card-header bg-secondary text-white fw-semibold">
      All Testimonials
    </div>
    <div class="card-body">
      {% if testimonials %}
      <ul class="list-group">
        {% for t in testimonials %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div class="me-3">
            <strong>{{ t.name }}</strong><br>
            <span>⭐ {{ t.rating }}</span> – "{{ t.content }}"
          </div>
          <div>
            <a href="{{ url_for('main.edit_testimonial', id=t.id) }}" class="btn btn-sm btn-outline-primary me-2">Edit</a>
            <a href="{{ url_for('main.delete_testimonial', id=t.id) }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this testimonial?')">Delete</a>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="text-muted">No testimonials yet.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
